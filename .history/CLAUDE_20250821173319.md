# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

ClautoHotkey is a comprehensive AutoHotkey v2 (AHK v2) development environment with structured prompts, modules, and scripts for AI-assisted AutoHotkey development. This repository contains hundreds of scripts demonstrating AHK v2 features including GUI applications, automation tools, and system utilities.

## Core Architecture

**Language**: AutoHotkey v2 only (no v1 support)
**Primary Focus**: Object-oriented GUI applications and system automation
**Structure**: Modular design with extensive library support and structured instruction system

## Common Commands

### Running AutoHotkey Scripts
```bash
# Preferred execution method with UTF-8 error output
& "C:\Program Files\AutoHotkey\v2\AutoHotkey64.exe" /ErrorStdOut=utf-8 "<script_path>"

# Quick test targets
& "C:\Program Files\AutoHotkey\v2\AutoHotkey64.exe" /ErrorStdOut=utf-8 "Tests\Test_Basic.ahk"
& "C:\Program Files\AutoHotkey\v2\AutoHotkey64.exe" /ErrorStdOut=utf-8 "Tests\Other_TestingSystem.ahk"
```

### User-facing Tools
- `_UltiLog.ahk` - Ultimate Logger for AI interaction logs and testing
- `_Lists.ahk` - JSON List Editor with dark theme
- `Scripts\Clip_SearchCode.ahk` - Code search and replacement tool
- `Scripts\ClipboardHistoryCombiner.ahk` - Clipboard history management
- `_Context_Creator.ahk` - Module combination tool for LLM context

## High-Level Architecture

### Module System
The project uses a sophisticated module-based instruction system organized in `/Modules/`:

**Core Modules**:
- `Module_Instructions.md` - **PRIMARY REFERENCE** - Foundational instruction set
- `Module_Classes.md` - OOP patterns, constructors, inheritance
- `Module_GUI.md` - GUI construction, events, layout mathematics  
- `Module_DataStructures.md` - Collections, Map() usage, data handling
- `Module_Objects.md` - Object manipulation, property patterns
- `Module_Arrays.md` - Array operations, iteration, transformations
- `Module_TextProcessing.md` - String operations, regex, formatting
- `Module_DynamicProperties.md` - Property descriptors, getters/setters
- `Module_Escapes.md` - Escaping rules for quotes, regex, paths

**Supplemental Modules** in `/Modules/Supplemental/`:
Additional specialized modules for error handling, testing, debugging, and advanced features.

### Cursor/IDE Integration
- **Rules**: Modern project rules in `.cursor/rules/` as MDC files
- **Core Rules**: 
  - `00-always-linter.mdc` - Always-on linter enforcement
  - `10-core-ahk-system.mdc` - Core AHK v2 system constraints
  - Additional rules for objects, GUI layout, text processing
- **Legacy**: `.cursorrules.md` references modern rule locations

### Directory Structure

```
/Modules/           - Core instruction modules for AI agents
/AHK_Notes/         - Extensive documentation and examples
  /Classes/         - Class-specific examples and patterns
  /Concepts/        - Advanced programming concepts
  /Methods/         - Method implementations and techniques
  /Patterns/        - Design patterns in AHK v2
  /Snippets/        - Code snippets and examples
/Scripts/           - User-facing utility applications
/Tests/             - Test scripts and validation tools
/Lib/               - Shared libraries and utility functions
/Data/              - XML data files and CSV exports
/System_Prompts/    - LLM system prompts for different platforms
/Styles/            - Code generation styles and templates
```

## AHK v2 Coding Standards

This project enforces strict AutoHotkey v2 coding standards:

### Core Requirements
- **Pure AHK v2 OOP**: Instantiate classes without `new` keyword
- **Data Storage**: Use `Map()` for all key-value storage (no object literals)
- **Event Binding**: All callbacks must use `.Bind(this)`
- **Resource Cleanup**: Implement `__Delete()` methods for proper cleanup
- **Variable Scoping**: Explicit variable declarations required
- **Fat Arrow Functions**: Single-line expressions only (no `{}` blocks)

### GUI Standards
- Class-based GUI construction only
- Deterministic layout with mathematical positioning
- Proper event handling with `OnEvent()`
- Input validation and error reporting
- Clean close/escape behaviors

### Data Handling
- Arrays are 1-based in AHK v2
- PCRE regex flags: `i/m/s/x` only
- Backtick escaping for quotes and special characters
- Strict comma/colon syntax adherence

## Development Workflow

### For AutoHotkey Development
1. Reference core modules in `/Modules/` for coding standards
2. Use existing patterns from `/AHK_Notes/` for complex implementations
3. Test with scripts in `/Tests/` directory
4. Validate syntax with AHK v2 interpreter
5. Use utility GUIs for debugging and code management

### Testing
- `Tests/Test_Basic.ahk` - Basic functionality smoke tests
- `Tests/Other_TestingSystem.ahk` - GUI-based test runner
- Individual test files for specific features

### Key Design Principles
- **No Comments**: Code should be self-documenting through clear naming
- **Error Handling**: Never use empty catch blocks; implement specific error strategies  
- **Performance**: Consider object lifetime and garbage collection
- **Maintainability**: Design for easy modification and extension
- **User Safety**: Validate all inputs and provide meaningful error messages

## Important Notes

- **AHK v2 Only**: No AutoHotkey v1 code or compatibility
- **No Node.js/MCP**: This is a pure AHK environment; do not search for or start web services
- **Targeted Reading**: Avoid broad discovery scans; read files relevant to specific requests
- **Module-First**: Always reference appropriate modules before implementing features
- **Clean Architecture**: Follow established patterns and maintain consistency with existing code

This repository represents a mature AutoHotkey v2 development environment optimized for AI-assisted development with comprehensive documentation and strict quality standards.